{% extends "base.html" %}

{% block title %}ROUTEGUESSR{% endblock %}

{% block styles %}
    <title>ROUTEGUESSR - Daily Challenge Complete!</title>
    <link href="{{ url_for('static', filename='styles/daily_final_results.css')}}" rel="stylesheet"/>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/ROUTEGUESSR.png') }}">
    <link rel="preload" href="/static/images/432A1345.jpg" as="image">
{% endblock %}

{% block content %}
<div class="logo-container">
    <a href="/" class="logo-link">
        <img src="{{ url_for('static', filename='images/ROUTEGUESSR.png') }}" alt="RouteGuessr Logo" class="logo">
    </a>
</div>

<section class="results-page">
    <div class="header-section">
        <h1 class="title">Daily Challenge Complete!</h1>
        <div class="total-score">
            <h2>Total Score: {{ total_score }}</h2>
            <p class="date">{{ date.strftime('%B %d, %Y') }}</p>
        </div>
    </div>
    <div class="levels-container">
        {% for level_num in range(1, 6) %}
            {% set level = level_data[level_num|string] %}
            <div class="level-card">
                <div class="level-header">
                    <h3>Level {{ level_num }}</h3>
                    <div class="level-score">{{ level.score }} points</div>
                </div>

                <div class="level-content">
                    <!-- Image Section -->
                    <div class="image-section">
                        <img src="{{ level.image_link }}" alt="{{ level.route_name }}">
                    </div>

                    <!-- Route Info Section -->
                    <div class="info-section">
                        <div class="route-name">
                            <a href="{{ level.route_link }}" target="_blank">{{ level.route_name }}</a>
                        </div>
                        <div class="route-details">
                            <span class="grade">{{ level.route_grade }}</span>
                            <span class="type">{{ level.route_type }}</span>
                            <span class="stars">‚≠ê {{ level.route_stars }}</span>
                            <span class="length">{{ level.route_length }}ft</span>
                        </div>
                        <div class="area-name">{{ level.area_name }}</div>

                        <!-- Distance -->
                        <div class="distance-info">
                            <strong>Your guess:</strong>
                            {% if level.distance >= 1 %}
                                {{ "%.2f"|format(level.distance) }} km away
                            {% else %}
                                {{ "%.0f"|format(level.distance * 1000) }} m away
                            {% endif %}
                        </div>

                        <!-- Coordinates -->
                        <div class="coordinates">
                            <div><strong>Actual:</strong> {{ "%.4f"|format(level.route_lat) }}, {{ "%.4f"|format(level.route_lon) }}</div>
                            <div><strong>Your guess:</strong> {{ "%.4f"|format(level.guess_lat) }}, {{ "%.4f"|format(level.guess_lon) }}</div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
    </div>

        <div class="actions">
            <a href="{{ url_for('home') }}" class="btn btn-primary">View Leaderboard</a>
            <a href="{{ url_for('home') }}" class="btn btn-secondary">Back to Home</a>
        </div>
    </section>
{% endblock %}